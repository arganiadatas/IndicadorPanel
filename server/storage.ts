import { EconomicIndicator, INDICATOR_IDS } from "@shared/schema";

export interface IStorage {
  getAllIndicators(): Promise<EconomicIndicator[]>;
  getIndicatorById(id: string): Promise<EconomicIndicator | undefined>;
}

export class MemStorage implements IStorage {
  private indicators: Map<string, EconomicIndicator>;

  constructor() {
    this.indicators = new Map();
    this.initializeData();
  }

  private initializeData() {
    const indicatorsData: EconomicIndicator[] = [
      {
        id: INDICATOR_IDS.ALQUILERES,
        name: "Alquileres",
        description: "Indicador del alquiler promedio de Furmul",
        unit: "$",
        trend: 0.0,
        data: [
          { time: "2025-01-09", value: 7.7 },
          { time: "2025-02-09", value: 124 },
          { time: "2025-03-09", value: 1944 },
          { time: "2025-04-09", value: 1522 },
          { time: "2025-05-09", value: 1522 },
          { time: "2025-06-09", value: 806 },
          { time: "2025-07-09", value: 974 },
          { time: "2025-08-09", value: 806 },
          { time: "2025-09-09", value: 2237 },
          { time: "2025-10-04", value: 2237 }
        ],
      },
      {
        id: INDICATOR_IDS.INFLATION,
        name: "Inflación (IPC mensual)",
        description: "El índice de precios al consumidor (IPC) mide la variación de precios de los bienes y servicios representativos del gasto de consumo de los hogares.",
        unit: "%",
        trend: -8.9,
        data: [
          { time: "2024-07-01", value: 154.76 },
          { time: "2024-08-01", value: 119.63 },
          { time: "2024-09-01", value: 1218.30 },
          { time: "2024-10-01", value: 402.03 },
          { time: "2024-11-01", value: 107.39 },
          { time: "2024-12-01", value: -79.89 },
          { time: "2025-01-01", value: 2552.67 },
          { time: "2025-02-01", value: 49.72 },
          { time: "2025-03-01", value: -34.54 },
          { time: "2025-04-01", value: -9.16 },
          { time: "2025-05-01", value: 9.10 },
          { time: "2025-06-01", value: 4.26 },
          { time: "2025-07-01", value: 1.09 },
          { time: "2025-08-01", value: -59.9 },
          { time: "2025-09-01", value: -51.1 }
        ],
      },
      {
        id: INDICATOR_IDS.CANASTA_BASICA,
        name: "Canasta Básica Total",
        description: "La Canasta Básica Total establece el ingreso que un hogar tipo debe tener para satisfacer, por medio de la compra de bienes y servicios no alimentarios (vestimenta, educación, salud, etc.), un conjunto de necesidades consideradas esenciales.",
        unit: "$",
        trend: -28.25,
        data: [
          { time: "2024-06-01", value: 32.10 },
          { time: "2024-07-01", value: 61.80 },
          { time: "2024-08-01", value: 926 },
          { time: "2024-09-01", value: 4665 },
          { time: "2024-10-01", value: 9840 },
          { time: "2024-11-01", value: 1892 },
          { time: "2024-12-01", value: 1721 },
          { time: "2025-01-01", value: 46760 },
          { time: "2025-02-01", value: 50598 },
          { time: "2025-03-01", value: 329779 },
          { time: "2025-04-01", value: 1884035 },
          { time: "2025-05-01", value: 1100756 },
          { time: "2025-06-01", value: 833294 },
          { time: "2025-07-01", value: 560134 },
          { time: "2025-08-01", value: 401895 },
        ],
      },
      {
        id: INDICATOR_IDS.EMAE,
        name: "EMAE",
        description: "El Estimador Mensual de Actividad Económica (EMAE) refleja la evolución mensual de la actividad económica del conjunto de los sectores productivos a nivel nacional.",
        unit: "índice",
        trend: 67.11,
        data: [
          { time: "2024-08-01", value: 7746.3 },
          { time: "2024-09-01", value: -182.1 },
          { time: "2024-10-01", value: 7130.6 },
          { time: "2024-11-01", value: 18843.6 },
          { time: "2024-12-01", value: 1361.5 },
          { time: "2025-01-01", value: 93.14 },
          { time: "2025-02-01", value: 840.85 },
          { time: "2025-03-01", value: 309.69 },
          { time: "2025-04-01", value: 493.57 },
          { time: "2025-05-01", value: 175.92 },
          { time: "2025-06-01", value: 198.33 },
          { time: "2025-07-01", value: 263.72 },
          { time: "2025-08-01", value: 517.58 },
          { time: "2025-09-01", value: 1053.71 },
          { time: "2025-10-01", value: 167.11 },
        ],
      },
      {
        id: INDICATOR_IDS.ICC,
        name: "Índice de Confianza del Consumidor",
        description: "El índice se confecciona con datos recolectados en una encuesta mensual sobre la situación económica personal y de la economía en general, con una muestra representativa.",
        unit: "puntos",
        trend: -2.1,
        data: [
          { time: "2025-10-01", value: 0.40 },
          { time: "2025-10-02", value: 0.17 },
          { time: "2025-10-03", value: 0.52 },
          { time: "2025-10-04", value: 0.07 },
          { time: "2025-10-05", value: 0.43 },
          { time: "2025-10-06", value: -4.13 },
          { time: "2025-10-07", value: -0.36 },
          { time: "2025-10-08", value: 0.17 },
          { time: "2025-10-09", value: 0.24 },
          { time: "2025-10-10", value: 3.35 },
          { time: "2025-10-11", value: -3.40 },
          { time: "2025-10-12", value: 0.23 },
          { time: "2025-10-13", value: 0.42 },
          { time: "2025-10-14", value: 0.34 },
          { time: "2025-10-15", value: 18.15 },
          { time: "2025-10-16", value: 0.17 },
          { time: "2025-10-17", value: 18.74 },
          { time: "2025-10-18", value: -0.18 },
          { time: "2025-10-19", value: 1.10 },
          { time: "2025-10-20", value: 0.06 },
          { time: "2025-10-21", value: 3.64 },
          { time: "2025-10-22", value: 0.21 },
          { time: "2025-10-23", value: -0.11 },
          { time: "2025-10-24", value: 0.08 },
          { time: "2025-10-25", value: 0.14 },
          { time: "2025-10-26", value: -0.06 },
          { time: "2025-10-27", value: -0.55 },
          { time: "2025-10-28", value: 0.25 },
          { time: "2025-10-29", value: 19.80 },
          { time: "2025-10-30", value: 25.04 },
          { time: "2025-10-31", value: 25.57 },
        ],
      },
      {
        id: INDICATOR_IDS.DESEMPLEO,
        name: "Tasa de Desocupación",
        description: "Presenta información sobre el comportamiento del mercado de trabajo, midiendo el porcentaje de la población económicamente activa que se encuentra sin empleo.",
        unit: "%",
        trend: -0.28,
        data: [
          { time: "2024-08-01", value: 1.12 },
          { time: "2024-09-01", value: 0.98 },
          { time: "2024-10-01", value: 0.38 },
          { time: "2024-11-01", value: 0.4 },
          { time: "2024-12-01", value: 0.28 },
          { time: "2025-01-01", value: 1.3 },
          { time: "2025-02-01", value: 8.04 },
          { time: "2025-03-01", value: 14.66 },
          { time: "2025-04-01", value: 11.43 },
          { time: "2025-05-01", value: 16.22 },
          { time: "2025-06-01", value: 12.47 },
          { time: "2025-07-01", value: 6.29 },
          { time: "2025-08-01", value: 4.29 },
          { time: "2025-09-01", value: 0.65 },
          { time: "2025-10-01", value: 0.37 },
        ],
      },
      {
        id: INDICATOR_IDS.RESERVAS,
        name: "Reservas USD",
        description: "Reservas internacionales en dólares estadounidenses del Banco Central de la República Argentina. Estas reservas incluyen oro, divisas extranjeras y otros activos de liquidez internacional.",
        unit: "Mil Millones USD",
        trend: -0.12,
        data: [
          { time: "2025-10-01", value: 15161 },
          { time: "2025-10-02", value: 15152 },
          { time: "2025-10-03", value: 15144 },
          { time: "2025-10-04", value: 15135 },
          { time: "2025-10-05", value: 15133 },
          { time: "2025-10-06", value: 15127 },
          { time: "2025-10-07", value: 15118 },
          { time: "2025-10-08", value: 17879 },
          { time: "2025-10-09", value: 17870 },
          { time: "2025-10-10", value: 17861 },
          { time: "2025-10-11", value: 17862 },
          { time: "2025-10-12", value: 17869 },
          { time: "2025-10-13", value: 17869 },
          { time: "2025-10-14", value: 17969 },
          { time: "2025-10-15", value: 20738 },
          { time: "2025-10-16", value: 20738 },
          { time: "2025-10-17", value: 20737 },
          { time: "2025-10-18", value: 20736 },
          { time: "2025-10-19", value: 20744 },
          { time: "2025-10-20", value: 20804 },
          { time: "2025-10-21", value: 20804 },
          { time: "2025-10-22", value: 23572 },
          { time: "2025-10-23", value: 23571 },
          { time: "2025-10-24", value: 23572 },
          { time: "2025-10-25", value: 23579 },
          { time: "2025-10-26", value: 23586 },
          { time: "2025-10-27", value: 23587 },
          { time: "2025-10-28", value: 23984 },
          { time: "2025-10-29", value: 26754 },
          { time: "2025-10-30", value: 26990 },
          { time: "2025-10-31", value: 26958 },
        ],
      },
      {
        id: INDICATOR_IDS.VENTAS_SUPER,
        name: "Ventas en Supermercados",
        description: "Mide la evolución de las ventas a los consumidores finales en supermercados a precios corrientes. Es un indicador clave del consumo privado y la actividad económica interna.",
        unit: "var. %",
        trend: 54.9,
        data: [
          { time: "2024-09-01", value: 4763.0 },
          { time: "2024-10-01", value: 4250.8 },
          { time: "2024-11-01", value: 2377.4 },
          { time: "2024-12-01", value: 4250.8 },
          { time: "2025-01-01", value: -9.9 },
          { time: "2025-02-01", value: 534.7 },
          { time: "2025-03-01", value: 321.3 },
          { time: "2025-04-01", value: 69.3 },
          { time: "2025-05-01", value: 110.4 },
          { time: "2025-06-01", value: 112.1 },
          { time: "2025-07-01", value: 263.7 },
          { time: "2025-08-01", value: 110.4 },
          { time: "2025-09-01", value: 176.9 },
          { time: "2025-10-01", value: 54.0 },
        ],
      },
      {
        id: INDICATOR_IDS.RESULTADOS_FISCALES,
        name: "Resultado Fiscal Primario",
        description: "El resultado fiscal primario muestra el balance de ingresos y gastos del sector público nacional antes del pago de intereses de la deuda. Un resultado positivo indica superávit, mientras que un resultado negativo indica déficit.",
        unit: "M $",
        trend: 406.3,
        data: [
          { time: "2024-09-01", value: 262 },
          { time: "2024-10-01", value: 36 },
          { time: "2024-11-01", value: 6971 },
          { time: "2024-12-01", value: 48194 },
          { time: "2025-01-01", value: 58649 },
          { time: "2025-02-01", value: 333456 },
          { time: "2025-03-01", value: 65584 },
          { time: "2025-04-01", value: 342092 },
          { time: "2025-05-01", value: -2197011 },
          { time: "2025-06-01", value: -2872025 },
          { time: "2025-07-01", value: 20353575 },
          { time: "2025-08-01", value: 18243567 },
          { time: "2025-09-01", value: 92365753 },
        ],
      },
      {
        id: INDICATOR_IDS.PBI,
        name: "Producto Bruto Interno (PBI)",
        description: "El Producto Bruto Interno (PBI) representa el valor total de todos los bienes y servicios finales producidos en el país durante un período determinado. Es el principal indicador del tamaño y salud de la economía.",
        unit: "var. % anual",
        trend: 43.6,
        data: [
          { time: "2025-01-01", value: 98.53 },
          { time: "2025-02-01", value: 32.95 },
          { time: "2025-03-01", value: -15.13 },
          { time: "2025-04-01", value: 197.30 },
          { time: "2025-05-01", value: 97.93 },
          { time: "2025-06-01", value: 141.62 },
          { time: "2025-07-01", value: 97.93 },
          { time: "2025-08-01", value: 6443.3 },
          { time: "2025-09-01", value: 43.6 },
        ],
      },
      {
        id: INDICATOR_IDS.DEUDA,
        name: "Deuda Externa y Pública",
        description: "Representa el total de la deuda del sector público argentino, tanto externa como interna. Incluye obligaciones con organismos internacionales, bonistas privados y otros acreedores. Se mide como porcentaje del PBI para evaluar la sostenibilidad fiscal.",
        unit: "% PBI",
        trend: -0,
        data: [
          { time: "2025-06-01", value: 0.1 },
          { time: "2025-07-01", value: 0.1 },
          { time: "2025-08-01", value: 0.1 },
        ],
      },
      {
        id: INDICATOR_IDS.CRIPTO_PAT,
        name: "Cripto $PAT",
        description: "Valor de mercado de la criptomoneda $PAT (Patria Token), un activo digital emergente vinculado al ecosistema económico local. Refleja la confianza de inversores en instrumentos alternativos de ahorro y la adopción de tecnologías blockchain en la región.",
        unit: "ANS",
        trend: -67.97,
        data: [
          { time: "2025-09-25", value: 798 },
          { time: "2025-09-26", value: 2333 },
          { time: "2025-09-27", value: 10504 },
          { time: "2025-09-28", value: 2231 },
          { time: "2025-09-29", value: 1337 },
          { time: "2025-09-30", value: 19318 },
          { time: "2025-10-01", value: 13253 },
          { time: "2025-10-02", value: 82620 },
          { time: "2025-10-03", value: 111773 },
          { time: "2025-10-04", value: 111582 },
          { time: "2025-10-05", value: 103975 },
          { time: "2025-10-06", value: 45168 },
          { time: "2025-10-07", value: 30199 },
          { time: "2025-10-08", value: 21955 },
          { time: "2025-10-09", value: 26120 },
          { time: "2025-10-10", value: 19924 },
          { time: "2025-10-11", value: 5023 },
          { time: "2025-10-12", value: 14579 },
          { time: "2025-10-13", value: 31518 },
          { time: "2025-10-14", value: 39122 },
          { time: "2025-10-15", value: 44817 },
          { time: "2025-10-16", value: 103867 },
          { time: "2025-10-17", value: 103097 },
          { time: "2025-10-20", value: 97700 },
          { time: "2025-10-28", value: 184202 },
          { time: "2025-10-29", value: 93059 },
          { time: "2025-10-30", value: 95514 },
          { time: "2025-10-31", value: 30596 },
        ],
      },
  
    ];

    indicatorsData.forEach((indicator) => {
      this.indicators.set(indicator.id, indicator);
    });
  }

  async getAllIndicators(): Promise<EconomicIndicator[]> {
    return Array.from(this.indicators.values());
  }

  async getIndicatorById(id: string): Promise<EconomicIndicator | undefined> {
    return this.indicators.get(id);
  }
}

export const storage = new MemStorage();
